{"version":3,"sources":["js/leaflet-control-geocoder.Geocoder.js"],"names":["f","exports","module","define","amd","g","window","global","self","leafletControlGeocoder","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_dereq_","L","Nominatim","Control","extend","options","showResultIcons","collapsed","expand","position","placeholder","errorMessage","suggestMinLength","suggestTimeout","defaultMarkGeocode","includes","Evented","prototype","Mixin","Events","initialize","Util","setOptions","geocoder","_requestCount","onAdd","map","className","container","DomUtil","create","icon","form","_form","input","_map","_container","innerHTML","type","_input","_errorElement","_alts","DomEvent","disableClickPropagation","addListener","_keydown","suggest","_change","_preventBlurCollapse","_collapse","button","detail","_toggle","Browser","touch","preventDefault","stopPropagation","_expand","on","_geocode","markGeocode","addClass","removeClass","_geocodeResult","results","_geocodeResultSelected","_results","appendChild","_createAlt","result","geocode","fitBounds","bbox","_geocodeMarker","removeLayer","Marker","center","bindPopup","html","name","addTo","openPopup","requestCount","mode","eventData","value","_lastGeocode","_clearResults","fire","hasClass","select","blur","_selection","index","li","text","undefined","document","createTextNode","mouseDownHandler","stop","src","setAttribute","_this","dir","keyCode","parseInt","getAttribute","v","clearTimeout","_suggestTimeout","setTimeout","bind","factory","Geocoder","Class","service_url","accessToken","_accessToken","query","cb","context","params","SingleLine","outFields","forStorage","maxLocations","_key","token","getJSON","data","loc","latLng","latLngBounds","candidates","location","y","x","extent","ymax","xmax","ymin","xmin","address","reverse","scale","encodeURIComponent","lng","lat","distance","error","push","Match_addr","bounds","ArcGis","key","jsonp","resourceSets","resources","resource","point","coordinates","Bing","serviceUrl","geocodingQueryParams","reverseQueryParams","geometry","viewport","northeast","southwest","formatted_address","properties","address_components","latlng","Google","geocodeUrl","reverseGeocodeUrl","app_id","app_code","searchtext","gen","jsonattributes","prox","url","response","view","displayPosition","latitude","longitude","mapView","topLeft","bottomRight","label","HERE","access_token","proximity","hasOwnProperty","features","slice","place_name","Mapbox","decodeURIComponent","_formatName","arguments","join","limit","outFormat","locations","street","adminArea4","adminArea3","adminArea1","outputFormat","MapQuest","apiKey","_apiKey","_lastSuggest","_parseResults","geocoding","timestamp","bboxname","geoJson","pointToLayer","feature","circleMarker","onEachFeature","layer","getBounds","getCenter","getLatLng","Mapzen","htmlTemplate","parts","road","building","city","town","village","hamlet","state","country","template","q","format","addressdetails","boundingbox","j","parseFloat","display_name","lon","zoom","Math","round","log","reverseUrl","nameProperties","_decodeFeatures","c","_deocodeFeatureName","Photon","addr","split","words","coords","status","What3Words","nominatim","bing","mapQuest","mapbox","what3words","google","photon","mapzen","arcgis","here","lastCallbackId","htmlEscape","badChars","possible","escape","escapeChar","chr","string","test","replace","callback","jsonpParam","callbackId","script","createElement","getParamString","id","getElementsByTagName","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","JSON","parse","open","setRequestHeader","send","str"],"mappings":"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","file":"leaflet-control-geocoder.Geocoder.660ddbbf.map","sourceRoot":"..","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.leafletControlGeocoder = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tNominatim = _dereq_('./geocoders/nominatim')[\"class\"];\n\nmodule.exports = {\n\t\"class\": L.Control.extend({\n\t\toptions: {\n\t\t\tshowResultIcons: false,\n\t\t\tcollapsed: true,\n\t\t\texpand: 'touch', // options: touch, click, anythingelse\n\t\t\tposition: 'topright',\n\t\t\tplaceholder: 'Search...',\n\t\t\terrorMessage: 'Nothing found.',\n\t\t\tsuggestMinLength: 3,\n\t\t\tsuggestTimeout: 250,\n\t\t\tdefaultMarkGeocode: true\n\t\t},\n\n\t\tincludes: L.Evented.prototype || L.Mixin.Events,\n\n\t\tinitialize: function (options) {\n\t\t\tL.Util.setOptions(this, options);\n\t\t\tif (!this.options.geocoder) {\n\t\t\t\tthis.options.geocoder = new Nominatim();\n\t\t\t}\n\n\t\t\tthis._requestCount = 0;\n\t\t},\n\n\t\tonAdd: function (map) {\n\t\t\tvar className = 'leaflet-control-geocoder',\n\t\t\t    container = L.DomUtil.create('div', className + ' leaflet-bar'),\n\t\t\t    icon = L.DomUtil.create('button', className + '-icon', container),\n\t\t\t    form = this._form = L.DomUtil.create('div', className + '-form', container),\n\t\t\t    input;\n\n\t\t\tthis._map = map;\n\t\t\tthis._container = container;\n\n\t\t\ticon.innerHTML = '&nbsp;';\n\t\t\ticon.type = 'button';\n\n\t\t\tinput = this._input = L.DomUtil.create('input', '', form);\n\t\t\tinput.type = 'text';\n\t\t\tinput.placeholder = this.options.placeholder;\n\n\t\t\tthis._errorElement = L.DomUtil.create('div', className + '-form-no-error', container);\n\t\t\tthis._errorElement.innerHTML = this.options.errorMessage;\n\n\t\t\tthis._alts = L.DomUtil.create('ul',\n\t\t\t\tclassName + '-alternatives leaflet-control-geocoder-alternatives-minimized',\n\t\t\t\tcontainer);\n\t\t\tL.DomEvent.disableClickPropagation(this._alts);\n\n\t\t\tL.DomEvent.addListener(input, 'keydown', this._keydown, this);\n\t\t\tif (this.options.geocoder.suggest) {\n\t\t\t\tL.DomEvent.addListener(input, 'input', this._change, this);\n\t\t\t}\n\t\t\tL.DomEvent.addListener(input, 'blur', function() {\n\t\t\t\tif (this.options.collapsed && !this._preventBlurCollapse) {\n\t\t\t\t\tthis._collapse();\n\t\t\t\t}\n\t\t\t\tthis._preventBlurCollapse = false;\n\t\t\t}, this);\n\n\n\t\t\tif (this.options.collapsed) {\n\t\t\t\tif (this.options.expand === 'click') {\n\t\t\t\t\tL.DomEvent.addListener(container, 'click', function(e) {\n\t\t\t\t\t\tif (e.button === 0 && e.detail !== 2) {\n\t\t\t\t\t\t\tthis._toggle();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\telse if (L.Browser.touch && this.options.expand === 'touch') {\n\t\t\t\t\tL.DomEvent.addListener(container, 'touchstart mousedown', function(e) {\n\t\t\t\t\t\tthis._toggle();\n\t\t\t\t\t\te.preventDefault(); // mobile: clicking focuses the icon, so UI expands and immediately collapses\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tL.DomEvent.addListener(container, 'mouseover', this._expand, this);\n\t\t\t\t\tL.DomEvent.addListener(container, 'mouseout', this._collapse, this);\n\t\t\t\t\tthis._map.on('movestart', this._collapse, this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._expand();\n\t\t\t\tif (L.Browser.touch) {\n\t\t\t\t\tL.DomEvent.addListener(container, 'touchstart', function(e) {\n\t\t\t\t\t\tthis._geocode(e);\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tL.DomEvent.addListener(container, 'click', function(e) {\n\t\t\t\t\t\tthis._geocode(e);\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.options.defaultMarkGeocode) {\n\t\t\t\tthis.on('markgeocode', this.markGeocode, this);\n\t\t\t}\n\n\t\t\tthis.on('startgeocode', function() {\n\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\n\t\t\t}, this);\n\t\t\tthis.on('finishgeocode', function() {\n\t\t\t\tL.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\n\t\t\t}, this);\n\n\t\t\tL.DomEvent.disableClickPropagation(container);\n\n\t\t\treturn container;\n\t\t},\n\n\t\t_geocodeResult: function (results, suggest) {\n\t\t\tif (!suggest && results.length === 1) {\n\t\t\t\tthis._geocodeResultSelected(results[0]);\n\t\t\t} else if (results.length > 0) {\n\t\t\t\tthis._alts.innerHTML = '';\n\t\t\t\tthis._results = results;\n\t\t\t\tL.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n\t\t\t\tfor (var i = 0; i < results.length; i++) {\n\t\t\t\t\tthis._alts.appendChild(this._createAlt(results[i], i));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tL.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\n\t\t\t}\n\t\t},\n\n\t\tmarkGeocode: function(result) {\n\t\t\tresult = result.geocode || result;\n\n\t\t\tthis._map.fitBounds(result.bbox);\n\n\t\t\tif (this._geocodeMarker) {\n\t\t\t\tthis._map.removeLayer(this._geocodeMarker);\n\t\t\t}\n\n\t\t\tthis._geocodeMarker = new L.Marker(result.center)\n\t\t\t\t.bindPopup(result.html || result.name)\n\t\t\t\t.addTo(this._map)\n\t\t\t\t.openPopup();\n\n\t\t\treturn this;\n\t\t},\n\n\t\t_geocode: function(suggest) {\n\t\t\tvar requestCount = ++this._requestCount,\n\t\t\t\tmode = suggest ? 'suggest' : 'geocode',\n\t\t\t\teventData = {input: this._input.value};\n\n\t\t\tthis._lastGeocode = this._input.value;\n\t\t\tif (!suggest) {\n\t\t\t\tthis._clearResults();\n\t\t\t}\n\n\t\t\tthis.fire('start' + mode, eventData);\n\t\t\tthis.options.geocoder[mode](this._input.value, function(results) {\n\t\t\t\tif (requestCount === this._requestCount) {\n\t\t\t\t\teventData.results = results;\n\t\t\t\t\tthis.fire('finish' + mode, eventData);\n\t\t\t\t\tthis._geocodeResult(results, suggest);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\n\t\t_geocodeResultSelected: function(result) {\n\t\t\tthis.fire('markgeocode', {geocode: result});\n\t\t},\n\n\t\t_toggle: function() {\n\t\t\tif (L.DomUtil.hasClass(this._container, 'leaflet-control-geocoder-expanded')) {\n\t\t\t\tthis._collapse();\n\t\t\t} else {\n\t\t\t\tthis._expand();\n\t\t\t}\n\t\t},\n\n\t\t_expand: function () {\n\t\t\tL.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\n\t\t\tthis._input.select();\n\t\t\tthis.fire('expand');\n\t\t},\n\n\t\t_collapse: function () {\n\t\t\tL.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-expanded');\n\t\t\tL.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n\t\t\tL.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n\t\t\tthis._input.blur(); // mobile: keyboard shouldn't stay expanded\n\t\t\tthis.fire('collapse');\n\t\t},\n\n\t\t_clearResults: function () {\n\t\t\tL.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n\t\t\tthis._selection = null;\n\t\t\tL.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n\t\t},\n\n\t\t_createAlt: function(result, index) {\n\t\t\tvar li = L.DomUtil.create('li', ''),\n\t\t\t\ta = L.DomUtil.create('a', '', li),\n\t\t\t\ticon = this.options.showResultIcons && result.icon ? L.DomUtil.create('img', '', a) : null,\n\t\t\t\ttext = result.html ? undefined : document.createTextNode(result.name),\n\t\t\t\tmouseDownHandler = function mouseDownHandler(e) {\n\t\t\t\t\t// In some browsers, a click will fire on the map if the control is\n\t\t\t\t\t// collapsed directly after mousedown. To work around this, we\n\t\t\t\t\t// wait until the click is completed, and _then_ collapse the\n\t\t\t\t\t// control. Messy, but this is the workaround I could come up with\n\t\t\t\t\t// for #142.\n\t\t\t\t\tthis._preventBlurCollapse = true;\n\t\t\t\t\tL.DomEvent.stop(e);\n\t\t\t\t\tthis._geocodeResultSelected(result);\n\t\t\t\t\tL.DomEvent.on(li, 'click', function() {\n\t\t\t\t\t\tif (this.options.collapsed) {\n\t\t\t\t\t\t\tthis._collapse();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis._clearResults();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this);\n\t\t\t\t};\n\n\t\t\tif (icon) {\n\t\t\t\ticon.src = result.icon;\n\t\t\t}\n\n\t\t\tli.setAttribute('data-result-index', index);\n\n\t\t\tif (result.html) {\n\t\t\t\ta.innerHTML = a.innerHTML + result.html;\n\t\t\t} else {\n\t\t\t\ta.appendChild(text);\n\t\t\t}\n\n\t\t\t// Use mousedown and not click, since click will fire _after_ blur,\n\t\t\t// causing the control to have collapsed and removed the items\n\t\t\t// before the click can fire.\n\t\t\tL.DomEvent.addListener(li, 'mousedown touchstart', mouseDownHandler, this);\n\n\t\t\treturn li;\n\t\t},\n\n\t\t_keydown: function(e) {\n\t\t\tvar _this = this,\n\t\t\t    select = function select(dir) {\n\t\t\t\t\tif (_this._selection) {\n\t\t\t\t\t\tL.DomUtil.removeClass(_this._selection, 'leaflet-control-geocoder-selected');\n\t\t\t\t\t\t_this._selection = _this._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\n\t\t\t\t\t}\n\t\t\t\t\tif (!_this._selection) {\n\t\t\t\t\t\t_this._selection = _this._alts[dir > 0 ? 'firstChild' : 'lastChild'];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (_this._selection) {\n\t\t\t\t\t\tL.DomUtil.addClass(_this._selection, 'leaflet-control-geocoder-selected');\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\tswitch (e.keyCode) {\n\t\t\t// Escape\n\t\t\tcase 27:\n\t\t\t\tif (this.options.collapsed) {\n\t\t\t\t\tthis._collapse();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// Up\n\t\t\tcase 38:\n\t\t\t\tselect(-1);\n\t\t\t\tbreak;\n\t\t\t// Up\n\t\t\tcase 40:\n\t\t\t\tselect(1);\n\t\t\t\tbreak;\n\t\t\t// Enter\n\t\t\tcase 13:\n\t\t\t\tif (this._selection) {\n\t\t\t\t\tvar index = parseInt(this._selection.getAttribute('data-result-index'), 10);\n\t\t\t\t\tthis._geocodeResultSelected(this._results[index]);\n\t\t\t\t\tthis._clearResults();\n\t\t\t\t} else {\n\t\t\t\t\tthis._geocode();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t_change: function(e) {\n\t\t\tvar v = this._input.value;\n\t\t\tif (v !== this._lastGeocode) {\n\t\t\t\tclearTimeout(this._suggestTimeout);\n\t\t\t\tif (v.length >= this.options.suggestMinLength) {\n\t\t\t\t\tthis._suggestTimeout = setTimeout(L.bind(function() {\n\t\t\t\t\t\tthis._geocode(true);\n\t\t\t\t\t}, this), this.options.suggestTimeout);\n\t\t\t\t} else {\n\t\t\t\t\tthis._clearResults();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}),\n\tfactory: function(options) {\n\t\treturn new L.Control.Geocoder(options);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./geocoders/nominatim\":9}],2:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tservice_url: 'http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer'\n\t\t},\n\n\t\tinitialize: function(accessToken, options) {\n\t\t\tL.setOptions(this, options);\n\t\t\tthis._accessToken = accessToken;\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\tvar params = {\n\t\t\t\tSingleLine: query,\n\t\t\t\toutFields: 'Addr_Type',\n\t\t\t\tforStorage: false,\n\t\t\t\tmaxLocations: 10,\n\t\t\t\tf: 'json'\n\t\t\t};\n\n\t\t\tif (this._key && this._key.length) {\n\t\t\t\tparams.token = this._key;\n\t\t\t}\n\n\t\t\tUtil.getJSON(this.options.service_url + '/findAddressCandidates', params, function(data) {\n\t\t\t\tvar results = [],\n\t\t\t\t\tloc,\n\t\t\t\t\tlatLng,\n\t\t\t\t\tlatLngBounds;\n\n\t\t\t\tif (data.candidates && data.candidates.length) {\n\t\t\t\t\tfor (var i = 0; i <= data.candidates.length - 1; i++) {\n\t\t\t\t\t\tloc = data.candidates[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.location.y, loc.location.x);\n\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.extent.ymax, loc.extent.xmax), L.latLng(loc.extent.ymin, loc.extent.xmin));\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\t\tname: loc.address,\n\t\t\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t},\n\n\t\tsuggest: function(query, cb, context) {\n\t\t\treturn this.geocode(query, cb, context);\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tvar params = {\n\t\t\t\tlocation: encodeURIComponent(location.lng) + ',' + encodeURIComponent(location.lat),\n\t\t\t\tdistance: 100,\n\t\t\t\tf: 'json'\n\t\t\t};\n\n\t\t\tUtil.getJSON(this.options.service_url + '/reverseGeocode', params, function(data) {\n\t\t\t\tvar result = [],\n\t\t\t\t\tloc;\n\n\t\t\t\tif (data && !data.error) {\n\t\t\t\t\tloc = L.latLng(data.location.y, data.location.x);\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tname: data.address.Match_addr,\n\t\t\t\t\t\tcenter: loc,\n\t\t\t\t\t\tbounds: L.latLngBounds(loc, loc)\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, result);\n\t\t\t});\n\t\t}\n\t}),\n\n\tfactory: function(accessToken, options) {\n\t\treturn new L.Control.Geocoder.ArcGis(accessToken, options);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],3:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\tinitialize: function(key) {\n\t\t\tthis.key = key;\n\t\t},\n\n\t\tgeocode : function (query, cb, context) {\n\t\t\tUtil.jsonp('https://dev.virtualearth.net/REST/v1/Locations', {\n\t\t\t\tquery: query,\n\t\t\t\tkey : this.key\n\t\t\t}, function(data) {\n\t\t\t\tvar results = [];\n\t\t\t\tif( data.resourceSets.length > 0 ){\n\t\t\t\t\tfor (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tvar resource = data.resourceSets[0].resources[i],\n\t\t\t\t\t\t\tbbox = resource.bbox;\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: resource.name,\n\t\t\t\t\t\t\tbbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n\t\t\t\t\t\t\tcenter: L.latLng(resource.point.coordinates)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcb.call(context, results);\n\t\t\t}, this, 'jsonp');\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tUtil.jsonp('//dev.virtualearth.net/REST/v1/Locations/' + location.lat + ',' + location.lng, {\n\t\t\t\tkey : this.key\n\t\t\t}, function(data) {\n\t\t\t\tvar results = [];\n\t\t\t\tfor (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar resource = data.resourceSets[0].resources[i],\n\t\t\t\t\t\tbbox = resource.bbox;\n\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\tname: resource.name,\n\t\t\t\t\t\tbbox: L.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n\t\t\t\t\t\tcenter: L.latLng(resource.point.coordinates)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tcb.call(context, results);\n\t\t\t}, this, 'jsonp');\n\t\t}\n\t}),\n\n\tfactory: function(key) {\n\t\treturn new L.Control.Geocoder.Bing(key);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],4:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://maps.googleapis.com/maps/api/geocode/json',\n\t\t\tgeocodingQueryParams: {},\n\t\t\treverseQueryParams: {}\n\t\t},\n\n\t\tinitialize: function(key, options) {\n\t\t\tthis._key = key;\n\t\t\tL.setOptions(this, options);\n\t\t\t// Backwards compatibility\n\t\t\tthis.options.serviceUrl = this.options.service_url || this.options.serviceUrl;\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\tvar params = {\n\t\t\t\taddress: query\n\t\t\t};\n\n\t\t\tif (this._key && this._key.length) {\n\t\t\t\tparams.key = this._key;\n\t\t\t}\n\n\t\t\tparams = L.Util.extend(params, this.options.geocodingQueryParams);\n\n\t\t\tUtil.getJSON(this.options.serviceUrl, params, function(data) {\n\t\t\t\tvar results = [],\n\t\t\t\t\t\tloc,\n\t\t\t\t\t\tlatLng,\n\t\t\t\t\t\tlatLngBounds;\n\t\t\t\tif (data.results && data.results.length) {\n\t\t\t\t\tfor (var i = 0; i <= data.results.length - 1; i++) {\n\t\t\t\t\t\tloc = data.results[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.geometry.location);\n\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.geometry.viewport.northeast), L.latLng(loc.geometry.viewport.southwest));\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: loc.formatted_address,\n\t\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\t\tcenter: latLng,\n\t\t\t\t\t\t\tproperties: loc.address_components\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tvar params = {\n\t\t\t\tlatlng: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng)\n\t\t\t};\n\t\t\tparams = L.Util.extend(params, this.options.reverseQueryParams);\n\t\t\tif (this._key && this._key.length) {\n\t\t\t\tparams.key = this._key;\n\t\t\t}\n\n\t\t\tUtil.getJSON(this.options.serviceUrl, params, function(data) {\n\t\t\t\tvar results = [],\n\t\t\t\t\t\tloc,\n\t\t\t\t\t\tlatLng,\n\t\t\t\t\t\tlatLngBounds;\n\t\t\t\tif (data.results && data.results.length) {\n\t\t\t\t\tfor (var i = 0; i <= data.results.length - 1; i++) {\n\t\t\t\t\t\tloc = data.results[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.geometry.location);\n\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.geometry.viewport.northeast), L.latLng(loc.geometry.viewport.southwest));\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: loc.formatted_address,\n\t\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\t\tcenter: latLng,\n\t\t\t\t\t\t\tproperties: loc.address_components\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t}\n\t}),\n\n\tfactory: function(key, options) {\n\t\treturn new L.Control.Geocoder.Google(key, options);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],5:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n    Util = _dereq_('../util');\n\nmodule.exports = {\n    \"class\": L.Class.extend({\n        options: {\n            geocodeUrl: 'http://geocoder.api.here.com/6.2/geocode.json',\n            reverseGeocodeUrl: 'http://reverse.geocoder.api.here.com/6.2/reversegeocode.json',\n            app_id: '<insert your app_id here>',\n            app_code: '<insert your app_code here>',\n            geocodingQueryParams: {},\n            reverseQueryParams: {}\n        },\n\n        initialize: function(options) {\n            L.setOptions(this, options);\n        },\n\n        geocode: function(query, cb, context) {\n            var params = {\n                searchtext: query,\n                gen: 9,\n                app_id: this.options.app_id,\n                app_code: this.options.app_code,\n                jsonattributes: 1\n            };\n            params = L.Util.extend(params, this.options.geocodingQueryParams);\n            this.getJSON(this.options.geocodeUrl, params, cb, context);\n        },\n\n        reverse: function(location, scale, cb, context) {\n            var params = {\n                prox: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng),\n                mode: 'retrieveAddresses',\n                app_id: this.options.app_id,\n                app_code: this.options.app_code,\n                gen: 9,\n                jsonattributes: 1\n            };\n            params = L.Util.extend(params, this.options.reverseQueryParams);\n            this.getJSON(this.options.reverseGeocodeUrl, params, cb, context);\n        },\n\n        getJSON: function(url, params, cb, context) {\n            Util.getJSON(url, params, function(data) {\n                var results = [],\n                    loc,\n                    latLng,\n                    latLngBounds;\n                if (data.response.view && data.response.view.length) {\n                    for (var i = 0; i <= data.response.view[0].result.length - 1; i++) {\n                        loc = data.response.view[0].result[i].location;\n                        latLng = L.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n                        latLngBounds = L.latLngBounds(L.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude), L.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude));\n                        results[i] = {\n                            name: loc.address.label,\n                            bbox: latLngBounds,\n                            center: latLng\n                        };\n                    }\n                }\n                cb.call(context, results);\n            })\n        }\n    }),\n\n    factory: function(options) {\n        return new L.Control.Geocoder.HERE(options);\n    }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],6:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://api.tiles.mapbox.com/v4/geocode/mapbox.places-v1/',\n\t\t\tgeocodingQueryParams: {},\n\t\t\treverseQueryParams: {}\n\t\t},\n\n\t\tinitialize: function(accessToken, options) {\n\t\t\tL.setOptions(this, options);\n\t\t\tthis.options.geocodingQueryParams.access_token = accessToken;\n\t\t\tthis.options.reverseQueryParams.access_token = accessToken;\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\tvar params = this.options.geocodingQueryParams;\n\t\t\tif (typeof params.proximity !== 'undefined'\n\t\t\t\t&& params.proximity.hasOwnProperty('lat')\n\t\t\t\t&& params.proximity.hasOwnProperty('lng'))\n\t\t\t{\n\t\t\t\tparams.proximity = params.proximity.lng + ',' + params.proximity.lat;\n\t\t\t}\n\t\t\tUtil.getJSON(this.options.serviceUrl + encodeURIComponent(query) + '.json', params, function(data) {\n\t\t\t\tvar results = [],\n\t\t\t\tloc,\n\t\t\t\tlatLng,\n\t\t\t\tlatLngBounds;\n\t\t\t\tif (data.features && data.features.length) {\n\t\t\t\t\tfor (var i = 0; i <= data.features.length - 1; i++) {\n\t\t\t\t\t\tloc = data.features[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.center.reverse());\n\t\t\t\t\t\tif (loc.hasOwnProperty('bbox'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: loc.place_name,\n\t\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t},\n\n\t\tsuggest: function(query, cb, context) {\n\t\t\treturn this.geocode(query, cb, context);\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tUtil.getJSON(this.options.serviceUrl + encodeURIComponent(location.lng) + ',' + encodeURIComponent(location.lat) + '.json', this.options.reverseQueryParams, function(data) {\n\t\t\t\tvar results = [],\n\t\t\t\tloc,\n\t\t\t\tlatLng,\n\t\t\t\tlatLngBounds;\n\t\t\t\tif (data.features && data.features.length) {\n\t\t\t\t\tfor (var i = 0; i <= data.features.length - 1; i++) {\n\t\t\t\t\t\tloc = data.features[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.center.reverse());\n\t\t\t\t\t\tif (loc.hasOwnProperty('bbox'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(L.latLng(loc.bbox.slice(0, 2).reverse()), L.latLng(loc.bbox.slice(2, 4).reverse()));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: loc.place_name,\n\t\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t}\n\t}),\n\n\tfactory: function(accessToken, options) {\n\t\treturn new L.Control.Geocoder.Mapbox(accessToken, options);\n\t}\n};\n\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],7:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://www.mapquestapi.com/geocoding/v1'\n\t\t},\n\n\t\tinitialize: function(key, options) {\n\t\t\t// MapQuest seems to provide URI encoded API keys,\n\t\t\t// so to avoid encoding them twice, we decode them here\n\t\t\tthis._key = decodeURIComponent(key);\n\n\t\t\tL.Util.setOptions(this, options);\n\t\t},\n\n\t\t_formatName: function() {\n\t\t\tvar r = [],\n\t\t\t\ti;\n\t\t\tfor (i = 0; i < arguments.length; i++) {\n\t\t\t\tif (arguments[i]) {\n\t\t\t\t\tr.push(arguments[i]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r.join(', ');\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\tUtil.jsonp(this.options.serviceUrl + '/address', {\n\t\t\t\tkey: this._key,\n\t\t\t\tlocation: query,\n\t\t\t\tlimit: 5,\n\t\t\t\toutFormat: 'json'\n\t\t\t}, function(data) {\n\t\t\t\tvar results = [],\n\t\t\t\t\tloc,\n\t\t\t\t\tlatLng;\n\t\t\t\tif (data.results && data.results[0].locations) {\n\t\t\t\t\tfor (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tloc = data.results[0].locations[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.latLng);\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n\t\t\t\t\t\t\tbbox: L.latLngBounds(latLng, latLng),\n\t\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t}, this);\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tUtil.jsonp(this.options.serviceUrl + '/reverse', {\n\t\t\t\tkey: this._key,\n\t\t\t\tlocation: location.lat + ',' + location.lng,\n\t\t\t\toutputFormat: 'json'\n\t\t\t}, function(data) {\n\t\t\t\tvar results = [],\n\t\t\t\t\tloc,\n\t\t\t\t\tlatLng;\n\t\t\t\tif (data.results && data.results[0].locations) {\n\t\t\t\t\tfor (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tloc = data.results[0].locations[i];\n\t\t\t\t\t\tlatLng = L.latLng(loc.latLng);\n\t\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\t\tname: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n\t\t\t\t\t\t\tbbox: L.latLngBounds(latLng, latLng),\n\t\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t}, this);\n\t\t}\n\t}),\n\n\tfactory: function(key, options) {\n\t\treturn new L.Control.Geocoder.MapQuest(key, options);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],8:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://search.mapzen.com/v1',\n\t\t\tgeocodingQueryParams: {},\n\t\t\treverseQueryParams: {}\n\t\t},\n\n\t\tinitialize: function(apiKey, options) {\n\t\t\tL.Util.setOptions(this, options);\n\t\t\tthis._apiKey = apiKey;\n\t\t\tthis._lastSuggest = 0;\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\tvar _this = this;\n\t\t\tUtil.getJSON(this.options.serviceUrl + \"/search\", L.extend({\n\t\t\t\t'api_key': this._apiKey,\n\t\t\t\t'text': query\n\t\t\t}, this.options.geocodingQueryParams), function(data) {\n\t\t\t\tcb.call(context, _this._parseResults(data, \"bbox\"));\n\t\t\t});\n\t\t},\n\n\t\tsuggest: function(query, cb, context) {\n\t\t\tvar _this = this;\n\t\t\tUtil.getJSON(this.options.serviceUrl + \"/autocomplete\", L.extend({\n\t\t\t\t'api_key': this._apiKey,\n\t\t\t\t'text': query\n\t\t\t}, this.options.geocodingQueryParams), L.bind(function(data) {\n\t\t\t\tif (data.geocoding.timestamp > this._lastSuggest) {\n\t\t\t\t\tthis._lastSuggest = data.geocoding.timestamp;\n\t\t\t\t\tcb.call(context, _this._parseResults(data, \"bbox\"));\n\t\t\t\t}\n\t\t\t}, this));\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tvar _this = this;\n\t\t\tUtil.getJSON(this.options.serviceUrl + \"/reverse\", L.extend({\n\t\t\t\t'api_key': this._apiKey,\n\t\t\t\t'point.lat': location.lat,\n\t\t\t\t'point.lon': location.lng\n\t\t\t}, this.options.reverseQueryParams), function(data) {\n\t\t\t\tcb.call(context, _this._parseResults(data, \"bounds\"));\n\t\t\t});\n\t\t},\n\n\t\t_parseResults: function(data, bboxname) {\n\t\t\tvar results = [];\n\t\t\tL.geoJson(data, {\n\t\t\t\tpointToLayer: function (feature, latlng) {\n\t\t\t\t\treturn L.circleMarker(latlng);\n\t\t\t\t},\n\t\t\t\tonEachFeature: function(feature, layer) {\n\t\t\t\t\tvar result = {},\n\t\t\t\t\t\tbbox,\n\t\t\t\t\t\tcenter;\n\n\t\t\t\t\tif (layer.getBounds) {\n\t\t\t\t\t\tbbox = layer.getBounds();\n\t\t\t\t\t\tcenter = bbox.getCenter();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcenter = layer.getLatLng();\n\t\t\t\t\t\tbbox = L.latLngBounds(center, center);\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.name = layer.feature.properties.label;\n\t\t\t\t\tresult.center = center;\n\t\t\t\t\tresult[bboxname] = bbox;\n\t\t\t\t\tresult.properties = layer.feature.properties;\n\t\t\t\t\tresults.push(result);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn results;\n\t\t}\n\t}),\n\n\tfactory: function(apiKey, options) {\n\t\treturn new L.Control.Geocoder.Mapzen(apiKey, options);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],9:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://nominatim.openstreetmap.org/',\n\t\t\tgeocodingQueryParams: {},\n\t\t\treverseQueryParams: {},\n\t\t\thtmlTemplate: function(r) {\n\t\t\t\tvar a = r.address,\n\t\t\t\t\tparts = [];\n\t\t\t\tif (a.road || a.building) {\n\t\t\t\t\tparts.push('{building} {road} {house_number}');\n\t\t\t\t}\n\n\t\t\t\tif (a.city || a.town || a.village || a.hamlet) {\n\t\t\t\t\tparts.push('<span class=\"' + (parts.length > 0 ? 'leaflet-control-geocoder-address-detail' : '') +\n\t\t\t\t\t\t'\">{postcode} {city} {town} {village} {hamlet}</span>');\n\t\t\t\t}\n\n\t\t\t\tif (a.state || a.country) {\n\t\t\t\t\tparts.push('<span class=\"' + (parts.length > 0 ? 'leaflet-control-geocoder-address-context' : '') +\n\t\t\t\t\t\t'\">{state} {country}</span>');\n\t\t\t\t}\n\n\t\t\t\treturn Util.template(parts.join('<br/>'), a, true);\n\t\t\t}\n\t\t},\n\n\t\tinitialize: function(options) {\n\t\t\tL.Util.setOptions(this, options);\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\tUtil.jsonp(this.options.serviceUrl + 'search', L.extend({\n\t\t\t\tq: query,\n\t\t\t\tlimit: 5,\n\t\t\t\tformat: 'json',\n\t\t\t\taddressdetails: 1\n\t\t\t}, this.options.geocodingQueryParams),\n\t\t\tfunction(data) {\n\t\t\t\tvar results = [];\n\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\n\t\t\t\t\tvar bbox = data[i].boundingbox;\n\t\t\t\t\tfor (var j = 0; j < 4; j++) bbox[j] = parseFloat(bbox[j]);\n\t\t\t\t\tresults[i] = {\n\t\t\t\t\t\ticon: data[i].icon,\n\t\t\t\t\t\tname: data[i].display_name,\n\t\t\t\t\t\thtml: this.options.htmlTemplate ?\n\t\t\t\t\t\t\tthis.options.htmlTemplate(data[i])\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\tbbox: L.latLngBounds([bbox[0], bbox[2]], [bbox[1], bbox[3]]),\n\t\t\t\t\t\tcenter: L.latLng(data[i].lat, data[i].lon),\n\t\t\t\t\t\tproperties: data[i]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tcb.call(context, results);\n\t\t\t}, this, 'json_callback');\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tUtil.jsonp(this.options.serviceUrl + 'reverse', L.extend({\n\t\t\t\tlat: location.lat,\n\t\t\t\tlon: location.lng,\n\t\t\t\tzoom: Math.round(Math.log(scale / 256) / Math.log(2)),\n\t\t\t\taddressdetails: 1,\n\t\t\t\tformat: 'json'\n\t\t\t}, this.options.reverseQueryParams), function(data) {\n\t\t\t\tvar result = [],\n\t\t\t\t    loc;\n\n\t\t\t\tif (data && data.lat && data.lon) {\n\t\t\t\t\tloc = L.latLng(data.lat, data.lon);\n\t\t\t\t\tresult.push({\n\t\t\t\t\t\tname: data.display_name,\n\t\t\t\t\t\thtml: this.options.htmlTemplate ?\n\t\t\t\t\t\t\tthis.options.htmlTemplate(data)\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\tcenter: loc,\n\t\t\t\t\t\tbounds: L.latLngBounds(loc, loc),\n\t\t\t\t\t\tproperties: data\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, result);\n\t\t\t}, this, 'json_callback');\n\t\t}\n\t}),\n\n\tfactory: function(options) {\n\t\treturn new L.Control.Geocoder.Nominatim(options);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],10:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://photon.komoot.de/api/',\n\t\t\treverseUrl: 'https://photon.komoot.de/reverse/',\n\t\t\tnameProperties: [\n\t\t\t\t'name',\n\t\t\t\t'street',\n\t\t\t\t'suburb',\n\t\t\t\t'hamlet',\n\t\t\t\t'town',\n\t\t\t\t'city',\n\t\t\t\t'state',\n\t\t\t\t'country'\n\t\t\t]\n\t\t},\n\n\t\tinitialize: function(options) {\n\t\t\tL.setOptions(this, options);\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\tvar params = L.extend({\n\t\t\t\tq: query\n\t\t\t}, this.options.geocodingQueryParams);\n\n\t\t\tUtil.getJSON(this.options.serviceUrl, params, L.bind(function(data) {\n\t\t\t\tcb.call(context, this._decodeFeatures(data));\n\t\t\t}, this));\n\t\t},\n\n\t\tsuggest: function(query, cb, context) {\n\t\t\treturn this.geocode(query, cb, context);\n\t\t},\n\n\t\treverse: function(latLng, scale, cb, context) {\n\t\t\tvar params = L.extend({\n\t\t\t\tlat: latLng.lat,\n\t\t\t\tlon: latLng.lng\n\t\t\t}, this.options.geocodingQueryParams);\n\n\t\t\tUtil.getJSON(this.options.reverseUrl, params, L.bind(function(data) {\n\t\t\t\tcb.call(context, this._decodeFeatures(data));\n\t\t\t}, this));\n\t\t},\n\n\t\t_decodeFeatures: function(data) {\n\t\t\tvar results = [],\n\t\t\t\ti,\n\t\t\t\tf,\n\t\t\t\tc,\n\t\t\t\tlatLng,\n\t\t\t\textent,\n\t\t\t\tbbox;\n\n\t\t\tif (data && data.features) {\n\t\t\t\tfor (i = 0; i < data.features.length; i++) {\n\t\t\t\t\tf = data.features[i];\n\t\t\t\t\tc = f.geometry.coordinates;\n\t\t\t\t\tlatLng = L.latLng(c[1], c[0]);\n\t\t\t\t\textent = f.properties.extent;\n\n\t\t\t\t\tif (extent) {\n\t\t\t\t\t\tbbox = L.latLngBounds([extent[1], extent[0]], [extent[3], extent[2]]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbbox = L.latLngBounds(latLng, latLng);\n\t\t\t\t\t}\n\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tname: this._deocodeFeatureName(f),\n\t\t\t\t\t\thtml: this.options.htmlTemplate ?\n\t\t\t\t\t\t\tthis.options.htmlTemplate(f)\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\tcenter: latLng,\n\t\t\t\t\t\tbbox: bbox,\n\t\t\t\t\t\tproperties: f.properties\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn results;\n\t\t},\n\n\t\t_deocodeFeatureName: function(f) {\n\t\t\tvar j,\n\t\t\t\tname;\n\t\t\tfor (j = 0; !name && j < this.options.nameProperties.length; j++) {\n\t\t\t\tname = f.properties[this.options.nameProperties[j]];\n\t\t\t}\n\n\t\t\treturn name;\n\t\t}\n\t}),\n\n\tfactory: function(options) {\n\t\treturn new L.Control.Geocoder.Photon(options);\n\t}\n};\n\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],11:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tUtil = _dereq_('../util');\n\nmodule.exports = {\n\t\"class\": L.Class.extend({\n\t\toptions: {\n\t\t\tserviceUrl: 'https://api.what3words.com/v2/'\n\t\t},\n\n\t\tinitialize: function(accessToken) {\n\t\t\tthis._accessToken = accessToken;\n\t\t},\n\n\t\tgeocode: function(query, cb, context) {\n\t\t\t//get three words and make a dot based string\n\t\t\tUtil.getJSON(this.options.serviceUrl +'forward', {\n\t\t\t\tkey: this._accessToken,\n\t\t\t\taddr: query.split(/\\s+/).join('.')\n\t\t\t}, function(data) {\n\t\t\t\tvar results = [], loc, latLng, latLngBounds;\n\t\t\t\tif (data.hasOwnProperty('geometry')) {\n\t\t\t\t\tlatLng = L.latLng(data.geometry['lat'],data.geometry['lng']);\n\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\n\t\t\t\t\tresults[0] = {\n\t\t\t\t\t\tname: data.words,\n\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t},\n\n\t\tsuggest: function(query, cb, context) {\n\t\t\treturn this.geocode(query, cb, context);\n\t\t},\n\n\t\treverse: function(location, scale, cb, context) {\n\t\t\tUtil.getJSON(this.options.serviceUrl +'reverse', {\n\t\t\t\tkey: this._accessToken,\n\t\t\t\tcoords: [location.lat,location.lng].join(',')\n\t\t\t}, function(data) {\n\t\t\t\tvar results = [],loc,latLng,latLngBounds;\n\t\t\t\tif (data.status.status == 200) {\n\t\t\t\t\tlatLng = L.latLng(data.geometry['lat'],data.geometry['lng']);\n\t\t\t\t\tlatLngBounds = L.latLngBounds(latLng, latLng);\n\t\t\t\t\tresults[0] = {\n\t\t\t\t\t\tname: data.words,\n\t\t\t\t\t\tbbox: latLngBounds,\n\t\t\t\t\t\tcenter: latLng\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tcb.call(context, results);\n\t\t\t});\n\t\t}\n\t}),\n\n\tfactory: function(accessToken) {\n\t\treturn new L.Control.Geocoder.What3Words(accessToken);\n\t}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"../util\":13}],12:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tControl = _dereq_('./control'),\n\tNominatim = _dereq_('./geocoders/nominatim'),\n\tBing = _dereq_('./geocoders/bing'),\n\tMapQuest = _dereq_('./geocoders/mapquest'),\n\tMapbox = _dereq_('./geocoders/mapbox'),\n\tWhat3Words = _dereq_('./geocoders/what3words'),\n\tGoogle = _dereq_('./geocoders/google'),\n\tPhoton = _dereq_('./geocoders/photon'),\n\tMapzen = _dereq_('./geocoders/mapzen'),\n\tArcGis = _dereq_('./geocoders/arcgis'),\n\tHERE = _dereq_('./geocoders/here');\n\nmodule.exports = L.Util.extend(Control[\"class\"], {\n\tNominatim: Nominatim[\"class\"],\n\tnominatim: Nominatim.factory,\n\tBing: Bing[\"class\"],\n\tbing: Bing.factory,\n\tMapQuest: MapQuest[\"class\"],\n\tmapQuest: MapQuest.factory,\n\tMapbox: Mapbox[\"class\"],\n\tmapbox: Mapbox.factory,\n\tWhat3Words: What3Words[\"class\"],\n\twhat3words: What3Words.factory,\n\tGoogle: Google[\"class\"],\n\tgoogle: Google.factory,\n\tPhoton: Photon[\"class\"],\n\tphoton: Photon.factory,\n\tMapzen: Mapzen[\"class\"],\n\tmapzen: Mapzen.factory,\n\tArcGis: ArcGis[\"class\"],\n\tarcgis: ArcGis.factory,\n\tHERE: HERE[\"class\"],\n\there: HERE.factory\n});\n\nL.Util.extend(L.Control, {\n\tGeocoder: module.exports,\n\tgeocoder: Control.factory\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./control\":1,\"./geocoders/arcgis\":2,\"./geocoders/bing\":3,\"./geocoders/google\":4,\"./geocoders/here\":5,\"./geocoders/mapbox\":6,\"./geocoders/mapquest\":7,\"./geocoders/mapzen\":8,\"./geocoders/nominatim\":9,\"./geocoders/photon\":10,\"./geocoders/what3words\":11}],13:[function(_dereq_,module,exports){\n(function (global){\nvar L = (typeof window !== \"undefined\" ? window['L'] : typeof global !== \"undefined\" ? global['L'] : null),\n\tlastCallbackId = 0,\n\thtmlEscape = (function() {\n\t\t// Adapted from handlebars.js\n\t\t// https://github.com/wycats/handlebars.js/\n\t\tvar badChars = /[&<>\"'`]/g;\n\t\tvar possible = /[&<>\"'`]/;\n\t\tvar escape = {\n\t\t  '&': '&amp;',\n\t\t  '<': '&lt;',\n\t\t  '>': '&gt;',\n\t\t  '\"': '&quot;',\n\t\t  '\\'': '&#x27;',\n\t\t  '`': '&#x60;'\n\t\t};\n\n\t\tfunction escapeChar(chr) {\n\t\t  return escape[chr];\n\t\t}\n\n\t\treturn function(string) {\n\t\t\tif (string == null) {\n\t\t\t\treturn '';\n\t\t\t} else if (!string) {\n\t\t\t\treturn string + '';\n\t\t\t}\n\n\t\t\t// Force a string conversion as this will be done by the append regardless and\n\t\t\t// the regex test will do this transparently behind the scenes, causing issues if\n\t\t\t// an object's to string has escaped characters in it.\n\t\t\tstring = '' + string;\n\n\t\t\tif (!possible.test(string)) {\n\t\t\t\treturn string;\n\t\t\t}\n\t\t\treturn string.replace(badChars, escapeChar);\n\t\t};\n\t})();\n\nmodule.exports = {\n\tjsonp: function(url, params, callback, context, jsonpParam) {\n\t\tvar callbackId = '_l_geocoder_' + (lastCallbackId++);\n\t\tparams[jsonpParam || 'callback'] = callbackId;\n\t\twindow[callbackId] = L.Util.bind(callback, context);\n\t\tvar script = document.createElement('script');\n\t\tscript.type = 'text/javascript';\n\t\tscript.src = url + L.Util.getParamString(params);\n\t\tscript.id = callbackId;\n\t\tdocument.getElementsByTagName('head')[0].appendChild(script);\n\t},\n\n\tgetJSON: function(url, params, callback) {\n\t\tvar xmlHttp = new XMLHttpRequest();\n\t\txmlHttp.onreadystatechange = function () {\n\t\t\tif (xmlHttp.readyState !== 4){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (xmlHttp.status !== 200 && xmlHttp.status !== 304){\n\t\t\t\tcallback('');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcallback(JSON.parse(xmlHttp.response));\n\t\t};\n\t\txmlHttp.open('GET', url + L.Util.getParamString(params), true);\n\t\txmlHttp.setRequestHeader('Accept', 'application/json');\n\t\txmlHttp.send(null);\n\t},\n\n\ttemplate: function (str, data) {\n\t\treturn str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\n\t\t\tvar value = data[key];\n\t\t\tif (value === undefined) {\n\t\t\t\tvalue = '';\n\t\t\t} else if (typeof value === 'function') {\n\t\t\t\tvalue = value(data);\n\t\t\t}\n\t\t\treturn htmlEscape(value);\n\t\t});\n\t},\n\n\thtmlEscape: htmlEscape\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[12])(12)\n});"]}